<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DinoPark Adventure ü¶ñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff9f1c; --secondary: #2ec4b6; --accent: #ff4d4d;
            --glass: rgba(255, 255, 255, 0.98); --dark: #2c3e50;
        }

        body { 
            margin:0; font-family:"Baloo 2", cursive; 
            background: radial-gradient(circle, #d4fc79 0%, #96e6a1 100%);
            color: var(--dark); height: 100vh; display: flex; 
            justify-content: center; align-items: center; overflow: hidden;
        }

        /* Scrollbar Removal */
        * { scrollbar-width: none !important; -ms-overflow-style: none !important; }
        *::-webkit-scrollbar { display: none !important; width: 0 !important; }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes wobble {
            0% { transform: translateX(0); }
            25% { transform: translateX(-3px) rotate(-1deg); }
            75% { transform: translateX(3px) rotate(1deg); }
            100% { transform: translateX(0); }
        }

        /* Login Specific Animations */
        .login-title {
            font-size: 5rem; color: var(--primary); margin: 0;
            animation: float 4s ease-in-out infinite;
            text-shadow: 4px 4px 0px rgba(0,0,0,0.05);
        }

        .login-input {
            width: 350px; padding: 15px; border-radius: 25px; border: 4px solid #eee; 
            font-size: 1.8rem; text-align: center; outline: none; font-family: inherit; font-weight: 800;
            transition: all 0.3s ease;
        }
        .login-input:hover { animation: wobble 0.5s ease-in-out; border-color: var(--secondary); }
        .login-input:focus { border-color: var(--primary); box-shadow: 0 0 20px rgba(255,159,28,0.2); }

        .start-btn {
            margin-top: 25px;
            animation: slideUp 0.8s ease-out both, pulse 2s infinite ease-in-out;
            animation-delay: 0.5s, 1.5s; /* Pulse starts after entrance */
        }

        /* HUD and Other Styles */
        #hud {
            position: fixed; top: 15px; right: 15px; z-index: 1000;
            display: none; flex-direction: row; gap: 15px;
        }
        .hud-item {
            background: var(--glass); padding: 8px 20px; border-radius: 15px;
            font-weight: 800; border: 3px solid var(--primary); font-size: 1.1rem;
        }

        .score-group {
            position: absolute; top: 20px; right: 25px;
            display: flex; flex-direction: column; align-items: flex-end; gap: 8px; z-index: 10;
        }
        #menuTotalBadge {
            background: var(--primary); color: white; padding: 8px 20px; 
            border-radius: 15px; font-weight: 800; font-size: 1.1rem;
            box-shadow: 0 4px 0 #cc7a00;
        }

        .container {
            width: 92%; max-width: 1000px; height: 85vh; 
            padding: 30px; background: var(--glass); border-radius: 50px; 
            border: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 40px 100px rgba(0,0,0,0.15); 
            display: flex; flex-direction: column; align-items: center; 
            box-sizing: border-box; position: relative; overflow: hidden;
        }

        #loginScreen { justify-content: center; text-align: center; }

        #lbModal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); display: none; 
            justify-content: center; align-items: center; z-index: 2000;
        }
        .modal-content { background: white; padding: 30px; border-radius: 40px; width: 350px; text-align: center; }

        .game-grid { display: flex; gap: 20px; margin: 50px 0; }
        .game-card { width: 210px; height: 210px; background: #fff; border-radius: 40px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; border: 4px solid #f0f0f0; }
        .game-card:hover { transform: scale(1.05) rotate(2deg); border-color: var(--primary); }
        .game-card img { width: 80%; height: 80%; object-fit: contain; }

        button { cursor: pointer; border: none; border-radius: 20px; padding: 12px 35px; font-size: 1.2rem; font-weight: 800; background: var(--primary); color: #fff; box-shadow: 0 5px 0 #cc7a00; transition: 0.1s; }
        button:active { transform: translateY(3px); box-shadow: 0 2px 0 #cc7a00; }
        .lb-btn { background: var(--secondary); font-size: 0.9rem; padding: 5px 15px; box-shadow: 0 3px 0 #1da195; }

        .timer-container { width: 100%; height: 12px; background: #eee; border-radius: 20px; margin-bottom: 15px; overflow: hidden; }
        .timer-fill { width: 100%; height: 100%; transition: width 0.1s linear; }
        .hidden { display: none !important; }

        #podium { display: flex; justify-content: center; align-items: flex-end; gap: 10px; height: 120px; margin: 30px 0; }
        .step { width: 70px; color: white; border-radius: 10px; display: flex; flex-direction: column; justify-content: flex-end; padding-bottom: 5px; font-weight: 800; position: relative; font-size: 0.8rem; }
        .step span { position: absolute; top: -25px; color: #333; width: 100%; left: 0; }
        .gold { background: #FFD700; height: 90px; order: 2; }
        .silver { background: #C0C0C0; height: 65px; order: 1; }
        .bronze { background: #CD7F32; height: 45px; order: 3; }
    </style>
</head>
<body>

<div id="hud">
    <div class="hud-item">Game Score: <span id="hudPoints">0</span></div>
    <div class="hud-item" id="livesHUD">üíñ <span id="hudLivesDisplay">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span></div>
</div>

<div id="lbModal">
    <div class="modal-content">
        <h2>Hall of Fame üèÜ</h2>
        <div id="podium"></div>
        <button onclick="toggleLB(false)">Close</button>
    </div>
</div>

<div id="loginScreen" class="container">
    <h1 class="login-title">DinoPark </h1>
    <p style="font-size: 1.1rem; margin-bottom: 25px; color: #777;">Prepare for your mission, Ranger!</p>
    <input type="text" id="userInput" class="login-input" placeholder="Ranger Name">
    <button class="start-btn" onclick="login()">Start Adventure</button>
</div>

<div id="menu" class="container hidden">
    <div class="score-group">
        <div id="menuTotalBadge">Total Score: <span id="totalPointsDisplay">0</span></div>
        <button class="lb-btn" onclick="toggleLB(true)">üèÜ Leaderboard</button>
    </div>
    <h2 style="margin-top: 40px; font-size: 2.5rem;">Welcome, <span id="nameLabel" style="color: var(--secondary);"></span>!</h2>
    <div class="game-grid">
        <div class="game-card" onclick="startMission('spelling')"><img src="SpellingBee.png"></div>
        <div class="game-card" onclick="startMission('nameDino')"><img src="Name_that.png"></div>
        <div class="game-card" onclick="startMission('trivia')"><img src="Trivia.png"></div>
    </div>
</div>

<div id="spelling" class="container hidden">
    <div class="timer-container"><div id="sBar" class="timer-fill" style="background: var(--primary);"></div></div>
    <h2>Spell the Dino!</h2>
    <input type="text" id="sInput" class="login-input" style="width: 400px;" onkeypress="if(event.key==='Enter')checkSpelling()">
    <div style="margin-top: 20px;">
        <button onclick="checkSpelling()">Submit</button>
        <button style="background:var(--secondary); box-shadow:0 5px 0 #1da195;" onclick="speakDino()">üîä Hear</button>
        <button style="background:#adb5bd; box-shadow:0 5px 0 #6c757d;" onclick="toMenu()">Back</button>
    </div>
    <p id="sFeedback" style="font-size:1.8rem; font-weight:800; min-height:45px;"></p>
</div>

<div id="nameDino" class="container hidden">
    <div class="timer-container"><div id="nBar" class="timer-fill" style="background: var(--secondary);"></div></div>
    <div style="width:100%; max-width:400px; height:250px; background:#fff; border-radius:35px; display:flex; align-items:center; justify-content:center; border:2px solid #eee; margin-bottom:15px;">
        <img id="dinoImg" style="max-width:90%; max-height:90%; object-fit:contain;">
    </div>
    <input type="text" id="nInput" class="login-input" placeholder="What's this dino?" onkeypress="if(event.key==='Enter')checkNameDino()">
    <div style="margin-top: 20px;">
        <button onclick="checkNameDino()">Submit</button>
        <button style="background:#adb5bd; box-shadow:0 5px 0 #6c757d;" onclick="toMenu()">Back</button>
    </div>
    <p id="nFeedback" style="font-size:1.8rem; font-weight:800; min-height:45px;"></p>
</div>

<div id="trivia" class="container hidden">
    <div class="timer-container"><div id="tBar" class="timer-fill" style="background: var(--accent);"></div></div>
    <h2 id="tQuestion" style="text-align:center; font-size:1.5rem; margin-bottom:15px;"></h2>
    <div id="tOptions" style="display:grid; grid-template-columns:1fr 1fr; gap:12px; width:100%; max-width:550px;"></div>
    <p id="tFeedback" style="font-size:1.6rem; font-weight:800; min-height:45px;"></p>
    <button style="background:#adb5bd; box-shadow:0 5px 0 #6c757d;" onclick="toMenu()">Exit</button>
</div>

<script>
let user = "", lives = 3, timer, curIdx = 0, currentMission = "";
let currentSessionPoints = 0;
let gameScores = { spelling: 0, nameDino: 0, trivia: 0 };

const dinoData = [
    {name:"triceratops", img:"Triceratops.jpg"}, {name:"stegosaurus", img:"Stegosaurus.jpg"},
    {name:"tyrannosaurus", img:"trex.jpg"}, {name:"velociraptor", img:"velociraptor.jpg"},
    {name:"brachiosaurus", img:"brachiosaurus.jpg"}
];

const triviaData = [
    {q:"Which dinosaur had three horns?", a:["T-Rex","Triceratops","Raptor","Diplodocus"], c:1},
    {q:"What does 'Tyrannosaurus' mean?", a:["Swift Thief","Lizard King","Tyrant Lizard","Giant Lizard"], c:2},
    {q:"Which dino had plates on its back?", a:["Stegosaurus","Ankylosaurus","Spinosaurus","Iguanodon"], c:0},
    {q:"What did dinosaurs hatch from?", a:["Seeds","Bubbles","Eggs","Caves"], c:2},
    {q:"Which of these was a meat-eater?", a:["Brachiosaurus","Velociraptor","Triceratops","Parasaurolophus"], c:1}
];

function login() {
    user = document.getElementById("userInput").value.trim();
    if(!user) return;
    document.getElementById("nameLabel").textContent = user;
    document.getElementById("loginScreen").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
    updateTotalScore();
    loadLeaderboard();
}

function toggleLB(show) { document.getElementById("lbModal").style.display = show ? "flex" : "none"; }

function startMission(type) {
    lives = 3; curIdx = 0; currentMission = type; currentSessionPoints = 0;
    updateHUD();
    document.getElementById("menu").classList.add("hidden");
    document.getElementById("hud").style.display = "flex"; 
    if(type==='spelling') { document.getElementById("spelling").classList.remove("hidden"); nextSpelling(); }
    else if(type==='nameDino') { document.getElementById("nameDino").classList.remove("hidden"); nextNameDino(); }
    else if(type==='trivia') { document.getElementById("trivia").classList.remove("hidden"); nextTrivia(); }
}

function toMenu() {
    clearInterval(timer);
    if (currentSessionPoints > gameScores[currentMission]) { gameScores[currentMission] = currentSessionPoints; }
    saveTotalScore(); updateTotalScore();
    document.getElementById("hud").style.display = "none"; 
    ["spelling","nameDino","trivia"].forEach(id => document.getElementById(id).classList.add("hidden"));
    document.getElementById("menu").classList.remove("hidden");
}

function updateHUD() {
    document.getElementById("hudPoints").textContent = currentSessionPoints;
    document.getElementById("hudLivesDisplay").textContent = "‚ù§Ô∏è".repeat(Math.max(0, lives));
}

function updateTotalScore() {
    let total = gameScores.spelling + gameScores.nameDino + gameScores.trivia;
    document.getElementById("totalPointsDisplay").textContent = total;
}

function handleFeedback(isCorrect, elementId, correctText) {
    const el = document.getElementById(elementId);
    if(isCorrect) {
        el.style.color = "var(--secondary)"; el.textContent = "‚úÖ Correct!";
        currentSessionPoints += 20;
    } else {
        el.style.color = "var(--accent)"; el.textContent = "‚ùå " + correctText;
        lives--;
        document.querySelector('.container:not(.hidden)').style.animation = "shake 0.4s";
        setTimeout(() => document.querySelector('.container:not(.hidden)').style.animation = "", 400);
    }
    updateHUD();
    if(lives <= 0) setTimeout(() => { alert("Out of lives!"); toMenu(); }, 1500);
}

function nextSpelling() {
    if(curIdx >= dinoData.length) return toMenu();
    document.getElementById("sInput").value = ""; document.getElementById("sFeedback").textContent = "";
    speakDino(); startTimer("sBar", 15, () => checkSpelling(true));
}
function checkSpelling(tout=false) {
    clearInterval(timer);
    let val = document.getElementById("sInput").value.toLowerCase().trim();
    handleFeedback(!tout && val === dinoData[curIdx].name, "sFeedback", dinoData[curIdx].name.toUpperCase());
    curIdx++; if(lives > 0) setTimeout(nextSpelling, 1800);
}
function speakDino() { window.speechSynthesis.speak(new SpeechSynthesisUtterance(dinoData[curIdx].name)); }

function nextNameDino() {
    if(curIdx >= dinoData.length) return toMenu();
    document.getElementById("dinoImg").src = dinoData[curIdx].img;
    document.getElementById("nInput").value = ""; document.getElementById("nFeedback").textContent = "";
    startTimer("nBar", 12, () => checkNameDino(true));
}
function checkNameDino(tout=false) {
    clearInterval(timer);
    let val = document.getElementById("nInput").value.toLowerCase().trim();
    handleFeedback(!tout && val === dinoData[curIdx].name, "nFeedback", "It's " + dinoData[curIdx].name);
    curIdx++; if(lives > 0) setTimeout(nextNameDino, 1800);
}

function nextTrivia() {
    if(curIdx >= triviaData.length) return toMenu();
    const q = triviaData[curIdx];
    document.getElementById("tQuestion").textContent = q.q;
    const box = document.getElementById("tOptions"); box.innerHTML = "";
    document.getElementById("tFeedback").textContent = "";
    q.a.forEach((opt, i) => {
        const b = document.createElement("button"); b.textContent = opt;
        b.onclick = () => checkTrivia(i); box.appendChild(b);
    });
    startTimer("tBar", 10, () => checkTrivia(-1));
}
function checkTrivia(idx) {
    clearInterval(timer);
    handleFeedback(idx === triviaData[curIdx].c, "tFeedback", "Answer: " + triviaData[curIdx].a[triviaData[curIdx].c]);
    curIdx++; if(lives > 0) setTimeout(nextTrivia, 1500);
}

function startTimer(barId, seconds, callback) {
    clearInterval(timer);
    let left = seconds; const bar = document.getElementById(barId);
    timer = setInterval(() => {
        left -= 0.1; bar.style.width = (left/seconds*100) + "%";
        if(left <= 0) { clearInterval(timer); callback(true); }
    }, 100);
}

function saveTotalScore() {
    let total = gameScores.spelling + gameScores.nameDino + gameScores.trivia;
    let lb = JSON.parse(localStorage.getItem("dinoLB") || "[]");
    let p = lb.find(x => x.n === user);
    if(p) { if(total > p.s) p.s = total; } else lb.push({n: user, s: total});
    localStorage.setItem("dinoLB", JSON.stringify(lb));
    loadLeaderboard();
}

function loadLeaderboard() {
    let lb = JSON.parse(localStorage.getItem("dinoLB") || "[]").sort((a,b) => b.s - a.s);
    const pod = document.getElementById("podium"); pod.innerHTML = "";
    [1,0,2].forEach(i => { if(lb[i]) {
        const d = document.createElement("div"); d.className = `step ${i===0?'gold':i===1?'silver':'bronze'}`;
        d.innerHTML = `<span>${lb[i].n}</span>${lb[i].s}`; pod.appendChild(d);
    }});
}
</script>
</body>
</html>
